(()=>{"use strict";const e=(e=0)=>{let t,r=document.querySelector(".score_recorde"),n=document.querySelector(".current_score");t=localStorage.getItem("recorde")?localStorage.getItem("recorde"):0,0==e&&(r.innerHTML="Рекорд "+t),n.innerHTML="Очки "+e,e>t&&localStorage.setItem("recorde",e)},t=document.querySelector(".gameboard"),r=document.querySelector(".buttonupp"),n=document.querySelector(".buttonleft"),o=document.querySelector(".buttonright"),l=document.querySelector(".buttonbottom"),c=document.querySelector(".container"),a=31,s=Object.freeze({UPP:"upp",BOTTON:"bottom",LEFT:"left",RIGHT:"right"});let d,i,u=s.LEFT,f=((e,t)=>{let r=[];for(let n=0;n<t;n++){r[n]=[];for(let o=0;o<t;o++)r[n][o]=document.createElement("div"),r[n][o].classList.add("box"),e.append(r[n][o])}return r})(t,a),h=[[21,21],[21,22]],m=0,g=[];g[0]=[],e(),r.addEventListener("click",(()=>{h[0][1]!=h[1][1]&&(u=s.UPP)})),n.addEventListener("click",(()=>{h[0][0]!=h[1][0]&&(u=s.LEFT)})),o.addEventListener("click",(()=>{h[0][0]!=h[1][0]&&(u=s.RIGHT)})),l.addEventListener("click",(()=>{h[0][1]!=h[1][1]&&(u=s.BOTTON)}));const L=setInterval((function(){!function(){if(h[0][0]<=0||h[0][0]>=a||h[0][1]<=0||h[0][1]>=a)return!1;for(let e=1;e<h.length;e++)if(h[0][0]==h[e][0]&&h[0][1]==h[e][1])return!1;for(let e=1;e<g.length;e++)if(h[0][0]==g[e][0]&&h[0][1]==g[e][1])return!1;return!0}()?((e,t,r)=>{clearInterval(e),r.classList.add("fail"),t.append(function(){const e=document.createElement("div");return e.classList.add("newgamebutton"),e.innerText="Новая игра",e.addEventListener("click",(()=>{window.location.reload()})),e}())})(L,c,t):(function(){let t=h[0][0],r=h[0][1];h[0]=((e,t,r)=>{switch(e){case"upp":return[t-=1,r];case"bottom":return[t+=1,r];case"left":return[t,r-=1];case"right":return[t,r+=1]}})(u,h[0][0],h[0][1]);let n=[];n[0]=[h[0][0],h[0][1]];for(let e=1;e<h.length;e++)n[e]=[],1==e?(n[1][0]=t,n[1][1]=r):(n[e][0]=h[e-1][0],n[e][1]=h[e-1][1]);f[h[0][0]][h[0][1]].classList.contains("apple")&&(f[d][i].classList.remove("apple"),v(),m++,e(m),1)&&(n[n.length]=[],n[n.length-1][0]=h[h.length-1][0],n[n.length-1][1]=h[h.length-1][1],g.push(h[h.length-1]));for(let e=0;e<n.length;e++)h[e]=[],h[e][0]=n[e][0],h[e][1]=n[e][1]}(),function(){for(let e=0;e<a;e++)for(let t=0;t<a;t++)f[e][t].classList.remove("snake_head"),f[e][t].classList.remove("snake_body");for(let e=0;e<h.length;e++)0==e?f[h[0][0]][h[0][1]].classList.add("snake_head"):f[h[e][0]][h[e][1]].classList.add("snake_body");for(let e=1;e<g.length;e++)f[g[e][0]][g[e][1]].classList.add("obstacle")}())}),300),p=setInterval(v,4e3);function v(){d=Math.floor(Math.random()*a),i=Math.floor(Math.random()*a);for(let e=0;e<h.length;e++)if(h[e][0]==d&&h[e][1]==i)return void v();for(let e=1;e<g.length;e++)if(g[e][0]==d&&g[e][1]==i)return void v();f[d][i].classList.add("apple"),clearInterval(p)}})();
//# sourceMappingURL=bundle.js.map